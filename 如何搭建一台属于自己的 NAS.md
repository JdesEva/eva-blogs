# 如何搭建一台属于自己的 NAS

> 今天换个内容讲讲，不讲技术，来点需要动手的。

NAS 想必很多同学都听过，即网络附加存储（Network Attached Storage），它主要干的事情就是储存，主打一个大容量，几十 TB 的储存大小那是正常的情况，并且还能构建磁盘阵列（RAID），使数据更加安全。

![我的 NAS](https://gitee.com/Jdeshz/eva-bot-source/raw/master/images/IMG_20230208_203410.jpg)

NAS 某种程度上来说可以认为是云盘，但是它又不仅仅只是云盘，以我的 NAS 为例，尽管主要功能就是干储存，但是它还可以挂远程下载资源、资源收集、数据同步等等功能，甚至还被我直接拉过来当成自有服务器了~

![群晖的照片管理套件](https://gitee.com/Jdeshz/eva-bot-source/raw/master/images/WX20230626-101904@2x.png)

> 看我的 NAS 上，都是我家猫的照片，再也不用出 iCloud 等云盘的会员费了！

NAS 现在都讲究 `ALL IN ONE`，即什么都在里面，什么都有，特别是现在的主营 NAS 的一些厂商，都为 NAS 提供了 Docker，直接将 NAS 的使用广度扩宽了好几个数量级，本来 NAS 还只是能干干储存的脏活累活，好家伙，加了 Docker，等于直接化身家庭服务器，不仅能干储存，还能运行服务。

![NAS 的 Docker](https://gitee.com/Jdeshz/eva-bot-source/raw/master/images/WX20230626-102015@2x.png)

> 我的 NAS 上运行着饥荒联机版的服务器、还有自己测试用的 Sentry 平台等等

看到这些你是不是蠢蠢欲动？是不是也想整一个 NAS？别着急，NAS 也不是适合所有人的，下面是 NAS 的一些特点，大家可以看一下

- 需要 7 x 24 小时开机
- 需要一个比较开阔的散热环境
- 如果有条件可以申请公网 IP（非必选）

其实从上面的条件也不难看出，它和服务器很相似。是的，从这个方面来说它就是个干储存的服务器。

而如果说大家对储存的需求比较小，或者说不是玩机党，那么这个东西其实可有可无。

当然，它的最大好处就是可以从此彻底摆脱百度云等云盘的网速限制，还不用收费。

我们可以算一笔账，iCloud 一个月月费是 6元/5G，现在的照片随便都是 10MB 左右的原图大小，那就只能存 5 * 1024 / 10 ~= 510 张，太少了。并且照片对我们而言，很多时候都是回忆，情感无价，物质有价，显然这基础版本的套餐满足不了需求，而如果升级配置，那可就是无底洞了~

上面这还只是照片，如果本身我们拍了个 vlog，那显然这些储存空间就更加不够用了，万一我们换手机了，那手机的照片怎么办？这又是需要倒腾的一个内容。

![群晖套件](https://gitee.com/Jdeshz/eva-bot-source/raw/master/images/WechatIMG18.jpeg)

而有了 NAS，则可以将手机中的照片、文件、视频等同步到自己的 NAS 上，可以后台闲时同步，一般而言，速度很快。以我家为例，速度可以达到 20MB/s + 的上传速度，而下载速度，则可以达到 140 ~ 200 MB/s。如果说在云盘上传输要达到这个速度，基本是不可能的。

当然，还有个问题是数据安全性的问题，前面也说到了，**数据无价**。因此，自己搭建 NAS 最重要的就是数据安全性，除了定期备份重要数据外，还有一个重要的环节，就是 RAID，即磁盘阵列。

RAID 是一项将多块硬盘组合起来，组成一个阵列储存的形式，如果其中的一块硬盘坏了，那么数据并会丢失，只是整体储存阵列会降级，仍然能够提供服务，当更新坏盘时，进行数据修复即可达到完美状态。常见的 RAID 有以下几种，需求的硬盘数量并不完全一致

- RAID 0（ 1 块）
- RAID 1（2块）
- RAID 5（至少3块）
- RAID 6（至少4块）

注意，上面几种虽然都是 RAID，但是也不是所有的都能提供亢余，保护数据，比如 RAID 0 就不会保护数据，毕竟，就一块盘，想保护也保护不了。

当然，组成 RAID 也是有代价的，代价就是会损失储存空间，因为需要硬盘空间去做亢余，保护数据，以备数据恢复使用。举个例子，以 RAID 5 举例，有3块硬盘，3TB、6TB、10TB，那么组成 RAID 5 之后，空间大小是 3TB，以**最小的硬盘空间**为准。

> 能看到这里的绝非等闲之辈

当我们组成了 RAID 之后，再配合定期备份重要数据，有条件的上个 UPS 电源，并且将重要数据定期冷备份，那基本就没了后顾之忧了。而且有个好处就是，储存在自己的 NAS 上的东西，不用担心被篡改（~~不用担心变成 8 秒教育片了~~），特别是没有公网 IP 的情况下，因为有物理隔离，外网无法访问。

![滑稽保命](https://gitee.com/Jdeshz/eva-bot-source/raw/master/images/WX20230626-123249@2x.png)

上面是 NAS 的总总好处，下面就是搭建属于自己的 NAS 了。

当然，如果图省事儿可以直接购买 NAS 厂商提供的成品，比较著名的是群晖和威联通。这两个各有优点，本文也不是带货文，没有广告费，就不多说这个了。我们选择自己 DIY，自己动手才是真的快乐，这是属于男人的浪漫！

如果需要自己搭建 NAS，至少需要以下内容

- 一块 CPU，配置随意，可以好一点，不需要全新，二手拆机的最香
- 全新的内存条，配置随意，建议 8G 起步
- 一块全新的主板
- 一个机箱
- 电源
- 若干块硬盘

看到上面的配置，是不是觉得，这不是组装电脑吗？没错！NAS 和家用电脑的差别就在于，有无显卡，其实如果有需求，上显卡也是可以的，当然，这需要钞能力。

组装的过程就是组装电脑的过程，非常的省心，按照说明书装，东西该插哪里就插哪里，别乱插，然后能成功点亮主板就完事儿了。

以我自己的 NAS 为例，配置和价格如下

- intel i5 8400F，二手拆机，¥ 782
- 技嘉 H410M，¥ 369
- 先锋 8G DDR4 * 2，¥ 129
- TANK 机箱，¥ 1388
- 电源，¥ 278
- 西数 4T 机械硬盘，¥ 539

上面合计 ¥ 3485，当然，还有一项费用并没有列出，即储存钱，就是硬盘，我上面只是列出了一块 4T 硬盘的钱。

> 我的真的喜欢我现在的这个机箱，它也最贵...其实如果对外观没什么要求也可以不用买这么好的，我是看上了它全金属机箱，十分的赛博朋克！

![NAS](eva-bot-source/images/WX20230626-133920@2x.png)

尽管现在储存都是白菜价，但是一旦需要买大容量的全新的储存，不论是 SSD，还是 HDD，都还是挺肉疼的。我的建议是去收大厂商剩下的硬盘，不为别的，便宜啊，比如我就收了几块某硬件厂商剩下的机械硬盘，香得很。当然，如果大家有钞能力，可以忽略我说的，直接上全新的 NAS 专用红盘。

> **收这些硬盘有风险，需要谨慎，有可能收到坏的，或者说翻新的**

一切准备就绪，机器组装完成，然后就可以安装系统，进行点亮了。

NAS 系统有很多，其实也可以根据个人喜好随意安装，而最快乐的地方也是在这，折腾 NAS 的系统。

下面列出一些 NAS 著名的开源系统

- 黑群晖
- TrueNAS
- OpenMediaVault
- XigmaNAS
- RockStor
- NexentaStor
- EasyNAS
- NASLite-2
- ...

除了上面这些，也可以安装 centos，IIS 等一些服务器相关的系统。而本人，则是垂涎于群晖的著名相册管理套件（SynologyPhotos），安装了黑群晖。

安装过程大家可以上网百度，唯一需要注意的是，如果是多个硬盘安装的话，需要修改 U 盘启动引导文件 `grub.cfg`，并且需要把里面的**硬盘标识符都改成 0**，不然无法自动识别，这一点网络上的教程搜不到，如果大家需要自己安装的话需要注意。下面是修改完成的一个举例

![grub.cfg](https://gitee.com/Jdeshz/eva-bot-source/raw/master/images/WX20230626-130619@2x.png)

安装完成之后就可以进入群晖的系统页面，至于如何玩转群晖，大家可以百度，我就不在赘述了~

而别的系统，也可以进行百度一下安装教程进行安装。

说了这么多，还是在最后说明一下，如果大家没有这方面需求，那不妨看本篇文章就当涨姿势，如果有这方面的需求，那什么，可以多看看相关内容，也请不要讲本文当做金圭玉臬，本文只是一个初步的介绍和推荐。当然，欢迎私信沟通~